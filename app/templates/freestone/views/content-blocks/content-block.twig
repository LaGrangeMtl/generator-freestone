{# Liste des blocks peut être limité par include param contentBlockTypes qui est une liste de types sous forme de liste mysql IN #}
{% set contentBlocks = fs_query({
	id:'content-blocks',
	table:'content_block',
	hasOne: [
		{
			table: 'content_block_type',
			alias: 'type'
		},
		{
			table: 'general_color',
			alias: 'contentBlock_background_color',
			link: 'content_block.background_color'
		},
		{
			table: 'include',
			alias: 'include_module'
		},
	],
	order: ['content_block.`order` ASC'],
	parentLink: {
		table: parentTable,
		recordId: parentId ? parentId : rootId,
	},
	where: [ contentBlockTypes ? "`type`.code IN (" ~ contentBlockTypes ~ ")" : "1" ],
	debug: false
}) %}

{% for contentBlock in contentBlocks %}
	{{ include('content-blocks/types/' ~ contentBlock.type.code ~ '.twig') }}
{% endfor %}


